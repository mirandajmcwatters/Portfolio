<!DOCTYPE html>
<html>
</html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Creative - Bootstrap Portfolio Theme by Bootstrapious.com</title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="robots" content="all,follow">
  <!-- Bootstrap CSS-->
  <link rel="stylesheet" href="vendor/bootstrap/css/bootstrap.min.css">
  <!-- Font Awesome CSS-->
  <link rel="stylesheet" href="vendor/font-awesome/css/font-awesome.min.css">
  <!-- Google fonts - Roboto-->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:400,300,700,400italic">
  <!-- owl carousel-->
  <link rel="stylesheet" href="vendor/owl.carousel/assets/owl.carousel.css">
  <link rel="stylesheet" href="vendor/owl.carousel/assets/owl.theme.default.css">
  <!-- theme stylesheet-->
  <link rel="stylesheet" href="css/style.default.css" id="theme-stylesheet">
  <!-- Custom stylesheet - for your changes-->
  <link rel="stylesheet" href="css/custom.css">
  <!-- Favicon-->
  <link rel="shortcut icon" href="img/favicon.png">
  <!-- Tweaks for older IEs--><!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script><![endif]-->
</head>
<body>
  <div id="all">
    <div class="container-fluid">
      <div class="row row-offcanvas row-offcanvas-left"> 
        <!--   *** SIDEBAR ***-->
        <div id="sidebar" class="col-xs-6 col-sm-4 col-md-3 sidebar-offcanvas">
          <div class="sidebar-content">
            <h1 class="sidebar-heading"> <a href="index.html">Miranda McWatters</a></h1>
            <p class="sidebar-p">Hi i'm Miranda, a data analyst. I created this website to share my work, and to help me easily reference code i've used in the past.</p>
            <ul class="sidebar-menu">
                <!-- Link-->
                <li class="sidebar-item"><a href="index.html" class="sidebar-link active">Home</a></li>
                <!-- Link-->
                <li class="sidebar-item"><a href="about.html" class="sidebar-link">About Me</a></li>
                <!-- Link-->
                <li class="sidebar-item"><a href="contact.html" class="sidebar-link">Get in touch</a></li>
            </ul>
            <p class="social"><a href="#" data-animate-hover="pulse" class="external facebook"><i class="fa fa-facebook"></i></a><a href="#" data-animate-hover="pulse" class="external gplus"><i class="fa fa-google-plus"></i></a><a href="#" data-animate-hover="pulse" class="external twitter"><i class="fa fa-twitter"></i></a><a href="#" title="" class="external instagram"><i class="fa fa-instagram"></i></a><a href="#" data-animate-hover="pulse" class="email"><i class="fa fa-envelope"></i></a></p>
            <div class="copyright text-center text-md-left">
              <p class="credit">&copy;2018 Your name or company | Template by <a href="http://bootstrapious.com/portfolio-themes" class="external">Bootstrapious.com</a></p>
              <!-- Please do not remove the backlink to us, unless you support the development at http://bootstrapious.com/donate. It is part of the license conditions. Thanks for understanding :)        -->
            </div>
          </div>
        </div>
        <!--   *** SIDEBAR END ***  -->
        <!--   *** DETAIL ***-->
        <div class="col-md-9 col-lg-9 content-column white-background">
          <div class="small-navbar d-flex d-md-none">
            <button type="button" data-toggle="offcanvas" class="btn btn-outline-primary"> <i class="fa fa-align-left mr-2"></i>Menu</button>
            <h1 class="small-navbar-heading"> <a href="index.html">Creative </a></h1>
          </div>
          <div class="row">
            <div class="col-lg-9">
              <div class="content-column-content">
                 <h1>Decision Tree Model</h1>
        <pre class="r">
            <code>
        library(pROC)
        library(rpart) 
        library(party) 
        library(partykit)
        library(caret)
        
        bankruptcy=as.data.frame(read.csv("BankruptcyData.csv",  header  =  TRUE, stringsAsFactors=T, sep = ","))
        head(bankruptcy)
       
        fyear    at  bkvlps invt     Lt rectr cogs   dvt   ebit    gp     ni  oiadp  revt
        1  2007 1.733 -4.3373    0 65.444     0    0 0.168 -1.009 0.000 -1.181 -1.009 0.000
        2  2006 2.614 -4.2455    0 64.976     0    0 0.179 -0.534 0.002 -0.121 -0.534 0.002
        3  2005 4.193 -4.2252    0 66.256     0    0 0.113 -0.406 0.000 -0.448 -0.406 0.000
        4  2004 1.841 -4.1869    0 63.342     0    0 0.113 -0.357 0.000 -0.395 -0.357 0.000
        5  2008 0.000 -1.4509    0  0.062     0    0 0.000 -0.062 0.000 -0.062 -0.062 0.000
        6  2007 0.000 -1.4266    0  0.000     0    0 0.000  0.000 0.000 -1.343  0.000 0.000
          dvpsx_f mkvalt prch_f Bankrupt
        1       0 4.4088   0.50      yes
        2       0 7.3480   0.75      yes
        3       0 4.1149   0.65      yes
        4       0 4.4088   0.75      yes
        5       0 0.0256   0.09       no
        6       0 0.1559   0.10       no

        summary(bankruptcy) 
        fyear            at                bkvlps               invt         
        Min.   :2001   Min.   :      0.0   Min.   :-602.9082   Min.   :     0.0  
        1st Qu.:2003   1st Qu.:     11.0   1st Qu.:   0.0016   1st Qu.:     0.0  
        Median :2005   Median :    236.8   Median :   2.6465   Median :     4.0  
        Mean   :2005   Mean   :   9511.9   Mean   :   4.5433   Mean   :  1908.5  
        3rd Qu.:2007   3rd Qu.:    866.4   3rd Qu.:   9.3517   3rd Qu.:    61.5  
        Max.   :2010   Max.   :2187631.0   Max.   : 273.6718   Max.   :462103.0  
              Lt                rectr               cogs                dvt           
        Min.   :      0.0   Min.   :     0.0   Min.   :  -188.34   Min.   :   -0.064  
        1st Qu.:      4.9   1st Qu.:     0.3   1st Qu.:     4.38   1st Qu.:    0.000  
        Median :    121.2   Median :     9.5   Median :    89.95   Median :    0.000  
        Mean   :   8877.3   Mean   :  3140.2   Mean   :  1251.55   Mean   :   39.682  
        3rd Qu.:    709.6   3rd Qu.:    79.7   3rd Qu.:   676.37   3rd Qu.:    0.854  
        Max.   :2074033.0   Max.   :994847.0   Max.   :109794.00   Max.   :10769.000  
             ebit                gp                 ni                 oiadp         
        Min.   :-7655.00   Min.   :-5257.84   Min.   :-27684.000   Min.   :-7655.00  
        1st Qu.:   -1.77   1st Qu.:    2.88   1st Qu.:   -12.986   1st Qu.:   -1.77  
        Median :    1.52   Median :   34.18   Median :    -0.216   Median :    1.52  
        Mean   :  232.91   Mean   :  491.33   Mean   :   -18.966   Mean   :  232.91  
        3rd Qu.:   36.04   3rd Qu.:  210.54   3rd Qu.:     8.236   3rd Qu.:   36.04  
        Max.   :65332.00   Max.   :67835.00   Max.   : 24728.000   Max.   :65332.00  
             revt              dvpsx_f             mkvalt            prch_f       
        Min.   : -4234.47   Min.   :  0.0000   Min.   :      0   Min.   :  0.005  
        1st Qu.:    10.38   1st Qu.:  0.0000   1st Qu.:      9   1st Qu.:  2.050  
        Median :   160.48   Median :  0.0000   Median :     66   Median :  8.850  
        Mean   :  1742.89   Mean   :  0.3355   Mean   :   5774   Mean   : 16.150  
        3rd Qu.:   877.43   3rd Qu.:  0.0000   3rd Qu.:    371   3rd Qu.: 22.770  
        Max.   :157333.00   Max.   :135.2300   Max.   :5820729   Max.   :221.000  
        Bankrupt 
        no :624  
        yes:697 


            </code>
        </pre>

        </pre>
        <p>Predicting bankruptcy with 80% of the data for training and 20% for testing.<p>
        <pre class="r"><code>
        train.index<-sample(c(1:dim(bankruptcy)[1]),dim(bankruptcy)[1]*0.8)
        train.df<-bankruptcy[train.index,]
        valid.df<-bankruptcy[-train.index,]

        DT1 <- rpart(Bankrupt ~., method="class", data=train.df)
        plot(DT1); text(DT1)

        pred <- predict(DT1, valid.df, decision.values=TRUE, type="class")
        #Create confusion matrix for DT-1
        cm=table(pred = pred, true = valid.df$Bankrupt)
        cm  

        true
        pred   no yes
          no  110  11
          yes  18 126
        </code></pre>
        <p><img src="/Users/mirandamcwatters/Desktop/Portfolio/Consumer-behavior-AUC.png" width="300" class="img-responsive"></p>
        <pre class="r">
            <code>
        cm=table(valid.df2$Phone_sale, test_prob > .5)
        cm 

        FALSE TRUE
        0   757  109
        1   514  141
            </code>
        </pre>
        <p>accuracy = (757+141)/(757+109+514+141)</p>
        <p>accuracy = .59</p>  
        <p>precision = (141)/(141+514)</p>   
        <p>precision = .22</p> 
        <p>sensitivity = 141/(141+109)</p>   
        <p>sensitivity = .56</p>
                            </div>
                        </div>
                    </div>           
                
  <!-- JavaScript files-->
  <script src="vendor/jquery/jquery.min.js"></script>
  <script src="vendor/popper.js/umd/popper.min.js"> </script>
  <script src="vendor/bootstrap/js/bootstrap.min.js"></script>
  <script src="vendor/jquery.cookie/jquery.cookie.js"> </script>
  <script src="vendor/owl.carousel/owl.carousel.min.js"></script>
  <script src="vendor/masonry-layout/masonry.pkgd.min.js"></script>
  <script src="js/front.js"></script>
</body>