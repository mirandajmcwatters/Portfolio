<!DOCTYPE html>
<html>
</html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Creative - Bootstrap Portfolio Theme by Bootstrapious.com</title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="robots" content="all,follow">
  <!-- Bootstrap CSS-->
  <link rel="stylesheet" href="vendor/bootstrap/css/bootstrap.min.css">
  <!-- Font Awesome CSS-->
  <link rel="stylesheet" href="vendor/font-awesome/css/font-awesome.min.css">
  <!-- Google fonts - Roboto-->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:400,300,700,400italic">
  <!-- owl carousel-->
  <link rel="stylesheet" href="vendor/owl.carousel/assets/owl.carousel.css">
  <link rel="stylesheet" href="vendor/owl.carousel/assets/owl.theme.default.css">
  <!-- theme stylesheet-->
  <link rel="stylesheet" href="css/style.default.css" id="theme-stylesheet">
  <!-- Custom stylesheet - for your changes-->
  <link rel="stylesheet" href="css/custom.css">
  <!-- Favicon-->
  <link rel="shortcut icon" href="img/favicon.png">
  <!-- Tweaks for older IEs--><!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script><![endif]-->
</head>
<body>
  <div id="all">
    <div class="container-fluid">
      <div class="row row-offcanvas row-offcanvas-left"> 
        <!--   *** SIDEBAR ***-->
        <div id="sidebar" class="col-xs-6 col-sm-4 col-md-3 sidebar-offcanvas">
          <div class="sidebar-content">
            <h1 class="sidebar-heading"> <a href="index.html">Creative</a></h1>
            <p class="sidebar-p">I am a creative illustrator and graphic designer with more than 10 years of experience. </p>
            <p class="sidebar-p">Originally from Toronto, currently based in London. </p>
            <ul class="sidebar-menu">
                <!-- Link-->
                <li class="sidebar-item"><a href="index.html" class="sidebar-link active">Home</a></li>
                <!-- Link-->
                <li class="sidebar-item"><a href="about.html" class="sidebar-link">About</a></li>
                <!-- Link-->
                <li class="sidebar-item"><a href="contact.html" class="sidebar-link">Get in touch</a></li>
            </ul>
            <p class="social"><a href="#" data-animate-hover="pulse" class="external facebook"><i class="fa fa-facebook"></i></a><a href="#" data-animate-hover="pulse" class="external gplus"><i class="fa fa-google-plus"></i></a><a href="#" data-animate-hover="pulse" class="external twitter"><i class="fa fa-twitter"></i></a><a href="#" title="" class="external instagram"><i class="fa fa-instagram"></i></a><a href="#" data-animate-hover="pulse" class="email"><i class="fa fa-envelope"></i></a></p>
            <div class="copyright text-center text-md-left">
              <p class="credit">&copy;2018 Your name or company | Template by <a href="http://bootstrapious.com/portfolio-themes" class="external">Bootstrapious.com</a></p>
              <!-- Please do not remove the backlink to us, unless you support the development at http://bootstrapious.com/donate. It is part of the license conditions. Thanks for understanding :)        -->
            </div>
          </div>
        </div>
        <!--   *** SIDEBAR END ***  -->
        <!--   *** DETAIL ***-->
        <div class="col-md-9 col-lg-9 content-column white-background">
          <div class="small-navbar d-flex d-md-none">
            <button type="button" data-toggle="offcanvas" class="btn btn-outline-primary"> <i class="fa fa-align-left mr-2"></i>Menu</button>
            <h1 class="small-navbar-heading"> <a href="index.html">Creative </a></h1>
          </div>
          <div class="row">
            <div class="col-lg-8">
              <div class="content-column-content">
                 <h1>Who wants to play in the Champions Leauge?</h1>
                 
        
        
        <p>The 2018-2019 Premier League season has officially come to a close. While Manchester City and Liverpool battled for the top two positions, the race to secure Champions League football by finishing in 3rd and 4th place was up for grabs. Chelsea, Tottenham, Arsenal and Manchester United all had oppurtunites to move into the top four , but all four teams have struggled in form. In the end, Chelsea and Tottenham finsihed in 3rd and 4th, but it was certainly far from certain for both team.s</p>
        <p>I decided to take a look and see how each team perfomance has dropped off.</p>
        <pre class="r"><code>suppressMessages(library(tidyverse))
        
        tbl &lt;- tibble(Team = c("Chelsea", "Tottenham", "Arsenal", "Manchester United"),
                      'Avg Points Per Game(1st 25 Matches)' = c(50/25, 60/25, 50/25, 51/25),
                      'Avg Points Per Game(last 12 Matches)' = c(22/12, 11/12, 20/12, 15/12)) %&gt;% 
              arrange(Team)
        
        knitr::kable(tbl, caption = "A stark drop in performance", digits = 2)             </code></pre>
        <table>
        <caption><span id="tab:unnamed-chunk-1">Table 1: </span>A stark drop in performance</caption>
        <thead>
        <tr class="header">
        <th align="left">Team</th>
        <th align="right">Avg Points Per Game(1st 25 Matches)</th>
        <th align="right">Avg Points Per Game(last 12 Matches)</th>
        </tr>
        </thead>
        <tbody>
        <tr class="odd">
        <td align="left">Arsenal</td>
        <td align="right">2.0</td>
        <td align="right">1.67</td>
        </tr>
        <tr class="even">
        <td align="left">Chelsea</td>
        <td align="right">2.0</td>
        <td align="right">1.83</td>
        </tr>
        <tr class="odd">
        <td align="left">Manchester United</td>
        <td align="right">2.0</td>
        <td align="right">1.25</td>
        </tr>
        <tr class="even">
        <td align="left">Tottenham</td>
        <td align="right">2.4</td>
        <td align="right">0.92</td>
        </tr>
        </tbody>
        </table>
        <p>As an avid Tottenham Hotspur supporter, I was pretty disappointed that we went from best performance to worst performance amongst the teams. Not only that, our average points per game dropped by 1.2 points per game! In most cases we would have been overtaken, given our poor run of form, but fortunately the other teams were unable to string together a strong run of matches.</p>
        <p>To take it a step further, I watned to quickly plot the team’s performance and see how things changed.</p>
        <p>I didn’t find easy access to cummulative points by match week, so I decided to use ClubElo rating as a proxy for overall performance.</p>
        <p><strong>Note: I need to either find reliable points by match week for next year or FINALLY complete my webscraping project for the Premier League website and other sources. More to follow on that, unless I find access to a good data source.</strong></p>
        <div id="visualising-the-performance-of-each-club" class="section level2">
        <h2>Visualising the performance of each club</h2>
        <p>I started by getting the EloClub rating for all four teams, and combing them into a single tidy data frame.</p>
        <pre class="r"><code>library(lubridate)
        
        matchweek_26 &lt;- as.Date("2019-02-08")
        start_date &lt;- matchweek_26 -10
        current_date &lt;- today()
        
        tottenham &lt;- read_csv("http://api.clubelo.com/tottenham") %&gt;% 
          filter(From &gt;= start_date, To &lt;= current_date) 
        chelsea &lt;- read_csv("http://api.clubelo.com/chelsea") %&gt;% 
          filter(From &gt;= start_date, To &lt;= current_date) 
        arsenal &lt;- read_csv("http://api.clubelo.com/arsenal") %&gt;% 
          filter(From &gt;= start_date, To &lt;= current_date)
        manunited &lt;- read_csv("http://api.clubelo.com/manunited") %&gt;% 
          filter(From &gt;= start_date, To &lt;= current_date)
        
        combined_teams &lt;- bind_rows(arsenal, chelsea, manunited, tottenham)</code></pre>
        <p>Once I had the data in a tidy format, it was simple to just plot their performance with ggplot. I wanted to see the change in performance in the last 12 match weeks and highlight the overall drop across all teams.</p>
        <pre class="r"><code>library(ggthemes)
        
        #plot inputs
        club_colors &lt;- c("#9C824A", "#034694", "#DA291C", "#132257")
        
        start_labels &lt;-combined_teams[!duplicated(combined_teams$Club),] %&gt;% 
          mutate(x_position = min(To) - 5)
        
        end_labels &lt;- combined_teams %&gt;% 
          arrange(desc(From))
        
        end_labels &lt;- end_labels[!duplicated(end_labels$Club),] %&gt;% 
          mutate(x_position = max(To) + 5)
        
        #graph
        combined_teams %&gt;% 
          ggplot(aes(x = To, y = Elo, color = Club)) +
          geom_line(size = 2.5) +
          geom_vline(xintercept =  as.numeric(matchweek_26), size = 1.5, color = "green") +
          geom_text(data = start_labels, aes(x = x_position, y = Elo, label = Club)) +
          geom_text(data = end_labels, aes(x = x_position, y = Elo, label = Club)) +
          scale_color_manual(values = club_colors) +
          scale_x_date(date_labels="%Y-%B") +#, breaks = , labels = ) +
          #scale_x_discrete("", limits = ) +
          labs(y = NULL,
               x = NULL,
               title = "Who wants to play in the Champions League?",
               subtitle = "Despite oppurtunites, no team searching for the top four has averaged 2 points per match for the last 12 matches",
               caption = "Club performance based on Elo rating system (clubelo.com)") + 
          theme_fivethirtyeight() +
          theme(legend.position = "none")</code></pre>
        <p><img src="/blog/2019-05-07-Champions_League_files/figure-html/Champions_League_Race-1.png" width="960" class="img-responsive"></p>
        </div>
        <div id="improvements" class="section level2">
        <h2>Improvements:</h2>
        <p>This was a quick post and review of the clubs performance. Looking at the finished product there are a few improvements I would consider if I had more time.</p>
        <ul>
        <li><p>For the future, I hope to have better data such as cummalative points per match week for each team.</p></li>
        <li><p>It would have been interesting to use club logos instead of geom_text, but I have never worked with inserting graphics with ggplot</p></li>
        <li><p>Manually creating the table - I would definately prefferd to scrape the data versus hard code it into the Rmarkdown, but again I need to find more reliable data</p></li>
        </ul>
        </div>
        <div id="conclusion" class="section level2">
        <h2>Conclusion:</h2>
        <p>I sincerly hope this was just a bad run of games and our form drastically improves.</p>
        </div>
        
                 
              </div>
            </div>
          </div>
            
                     
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- JavaScript files-->
  <script src="vendor/jquery/jquery.min.js"></script>
  <script src="vendor/popper.js/umd/popper.min.js"> </script>
  <script src="vendor/bootstrap/js/bootstrap.min.js"></script>
  <script src="vendor/jquery.cookie/jquery.cookie.js"> </script>
  <script src="vendor/owl.carousel/owl.carousel.min.js"></script>
  <script src="vendor/masonry-layout/masonry.pkgd.min.js"></script>
  <script src="js/front.js"></script>
</body>